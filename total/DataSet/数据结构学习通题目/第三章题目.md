# 第三章题目（栈、队列）

## 选择题

### 1.![alt text](<PicturE/屏幕截图 2026-01-01 190126.png>)

#### 解析：“中序表达式的双栈法”

中缀表达式求值用**双栈法（操作数栈、运算符栈）**的基本规则如下（以常见的**算符优先算法**为例）：

---

##### 1. **数据结构**
- **操作数栈**：存放数字（或中间计算结果）
- **运算符栈**：存放运算符（包括括号）

---

##### 2. **基本规则（当扫描到一个元素时）**

**（1）如果是数字**  
直接压入**操作数栈**。

**（2）如果是运算符（记作 `op`）**  
比较 `op` 与**运算符栈栈顶元素**的优先级：
- 若**栈空** 或 **栈顶是 `(`** 或 **`op` 优先级 > 栈顶优先级** → `op` 直接入运算符栈。
- 否则，不断从运算符栈弹出栈顶运算符，从操作数栈弹出两个数，执行运算并将结果压回操作数栈，直到栈空、栈顶为 `(` 或 `op` 优先级 > 栈顶优先级，再将 `op` 入栈。

**常见优先级（从高到低）**：  
`*`, `/` > `+`, `-` > `(`（注意 `(` 在栈外时优先级最高，入栈后最低）  
括号内运算符与括号外比较时，`(` 视为最低（阻止弹出）。

**（3）如果是左括号 `(`**  
直接压入**运算符栈**（它的栈内优先级最低，以保证之后的运算符入栈不受影响）。

**（4）如果是右括号 `)`**  
不断弹出运算符栈顶并执行运算，直到弹出 `(` 为止（`(` 丢弃）。

**（5）扫描完表达式后**  
将运算符栈剩余符号依次弹出并运算，直到运算符栈为空，操作数栈剩下一个数即为结果。

---

##### 3. **举例辅助理解**
例：`3 + 2 * (4 + 2 * 2 - 6 * 3) - 5`，到扫描到 `6` 时  
- 运算符栈：`+ * ( -`  
- 操作数栈：`3 2 8 6`  
说明：  
  - 遇到 `-` 时，由于栈顶 `*` 和 `+` 优先级高，先算了 `2*2` 和 `4+4` 才将 `-` 入栈。  
  - `6` 是数字，直接进入操作数栈。

---

##### 4. **关键注意点**
- 括号会改变运算的局部优先级
- 相同优先级一般从左到右运算（左结合）
- 比较优先级时，区分**栈内优先级**（isp）和**栈外优先级**（icp），有的算法用表驱动实现

#### 这个算法也称为 **调度场算法（Shunting-yard）** 的双栈求值版本。
